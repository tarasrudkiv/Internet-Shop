{"version":3,"sources":["./src/app/user-module/components/all-users/all-users.component.ts","./src/app/user-module/components/all-users/all-users.component.html","./src/app/user-module/components/user-card/user-card.component.ts","./src/app/user-module/components/user-card/user-card.component.html"],"names":[],"mappings":"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","file":"default~admin-module-admin-module~user-module-user-module.js","sourcesContent":["import {Component, OnInit} from '@angular/core';\r\nimport {Router} from '@angular/router';\r\nimport {UserService} from '../../services/user.service';\r\nimport {IUser} from '../../model/userModel';\r\n\r\n\r\n@Component({\r\n  selector: 'app-all-users',\r\n  templateUrl: './all-users.component.html',\r\n  styleUrls: ['./all-users.component.css']\r\n})\r\nexport class AllUsersComponent implements OnInit {\r\n  users: IUser[];\r\n  totalElements: number;\r\n  userName: string;\r\n  searchType: string;\r\n  page: number;\r\n\r\n  constructor(private userService: UserService, private  router: Router) {\r\n    this.userService.getAllUsers(0).subscribe(value => {\r\n      this.users = value.usersList;\r\n      this.totalElements = value.totalElements;\r\n    });\r\n    this.searchType = \"all\";\r\n    this.page = 1;\r\n  }\r\n\r\n  private setPageNumber(): void { // при зміні типу пошуку відкриває першу сторінку\r\n    this.page = 1;\r\n  }\r\n\r\n  public toUserPage(user: IUser): void {\r\n    this.router.navigate(['admin/allUsers/user', user.id], {state: {user}});\r\n  }\r\n\r\n  public getAllUsers() {\r\n    this.userService.getAllUsers(0).subscribe(value => {\r\n      this.users = value.usersList;\r\n      this.totalElements = value.totalElements;\r\n      this.searchType = \"all\";\r\n      this.setPageNumber();\r\n      this.userName = null\r\n    })\r\n  }\r\n\r\n  public getUserByUserName() {\r\n    this.userService.getAllUsersByUserName(0, this.userName).subscribe(value => {\r\n      this.users = value.usersList;\r\n      this.totalElements = value.totalElements;\r\n      this.searchType = \"byName\";\r\n      this.setPageNumber()\r\n    })\r\n  }\r\n\r\n  onPageChange(pageNumber: number) {//перевіряє тип пошуку щоб підтягнути правильну сторінку\r\n    if (this.searchType == \"all\") {\r\n      this.userService.getAllUsers(pageNumber - 1).subscribe(value => {\r\n          this.users = value.usersList;\r\n          this.totalElements = value.totalElements;\r\n        }\r\n      );\r\n    }\r\n    if (this.searchType == \"byName\") {\r\n      this.userService.getAllUsersByUserName(pageNumber - 1, this.userName).subscribe(value => {\r\n        this.users = value.usersList;\r\n        this.totalElements = value.totalElements;\r\n      })\r\n    }\r\n  }\r\n\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<div>\r\n<div [ngClass]=\"{formBlock:true}\">\r\n  <form  #findUserForm=\"ngForm\" [ngClass]=\"{form:true}\">\r\n    <button [ngClass]=\"{button:true}\" (click)=\"getAllUsers()\">All</button>\r\n    <input [ngClass]=\"{input:true}\" type=\"text\" name=\"userName\" [(ngModel)]=\"userName\" #name=\"ngModel\" required>\r\n    <button [ngClass]=\"{button:true}\" (click)=\"getUserByUserName()\" [disabled]=\"!findUserForm.valid\">Find</button>\r\n  </form>\r\n</div>\r\n  <app-user-card *ngFor=\"let user of users\" [user]=\"user\"></app-user-card>\r\n  <ngb-pagination class=\"d-flex justify-content-center\" [collectionSize]=\"totalElements\" maxSize=\"10\"\r\n                  [(page)]=\"page\"\r\n                  (pageChange)=\"onPageChange($event)\" [boundaryLinks]=\"true\"></ngb-pagination>\r\n</div>\r\n","import {Component, Input, OnInit} from '@angular/core';\r\nimport {IUser} from '../../model/userModel';\r\nimport {UserService} from \"../../services/user.service\";\r\n\r\n\r\n@Component({\r\n  selector: 'app-user-card',\r\n  templateUrl: './user-card.component.html',\r\n  styleUrls: ['./user-card.component.css']\r\n})\r\nexport class UserCardComponent implements OnInit {\r\n  @Input()\r\n  user: IUser;\r\n  role = null;\r\n  loading = null;\r\n\r\n  constructor(private userService: UserService) {\r\n  }\r\n\r\n  public isCurrentUserMainAdmin(): boolean {\r\n    return (localStorage.getItem(\"role\") === \"ROLE_MAIN_ADMIN\")\r\n  }\r\n\r\n  public isUserMainAdmin(): boolean {\r\n    return (this.user.role === \"ROLE_MAIN_ADMIN\")\r\n  }\r\n\r\n  print() {\r\n    console.log(this.role)\r\n  }\r\n\r\n  changeRole() {\r\n    this.loading = 'LOADING...';\r\n    if (this.role === \"ROLE_USER\" || this.role === \"ROLE_ADMIN\") {\r\n      this.userService.changeRole(this.role, this.user.id).subscribe(value => {\r\n        this.user.role = value.role;\r\n        this.loading = null;\r\n        alert(\"Success\")\r\n      });\r\n    } else {\r\n      this.loading = null;\r\n      alert(\"print correct role\")\r\n    }\r\n  }\r\n\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<div *ngIf=\"!isCurrentUserMainAdmin()||!isUserMainAdmin()\" [ngClass]=\"{main:true}\">\r\n  <p [ngClass]=\"{id:true}\">{{user.id}}</p>\r\n  <p [ngClass]=\"{name:true}\">{{user.username}}</p>\r\n  <p [ngClass]=\"{email:true}\">{{user.email}}</p>\r\n  <p [ngClass]=\"{number:true}\">{{user.phoneNumber}}</p>\r\n  <p [ngClass]=\"{role:true}\">{{user.role}}</p>\r\n  <div [ngClass]=\"{select:true}\" *ngIf=\"isCurrentUserMainAdmin()\">\r\n    <select name=\"role\" [(ngModel)]=\"role\">\r\n      <option>ROLE_USER</option>\r\n      <option>ROLE_ADMIN</option>\r\n    </select>\r\n    <button [disabled]=\"!role||loading\" [ngClass]=\"{button:true}\" (click)=\"changeRole()\">Change</button>\r\n    <p>{{loading}}</p>\r\n  </div>\r\n</div>\r\n\r\n\r\n\r\n"],"sourceRoot":"webpack:///"}